{% extends 'base.html' %}
{% block title %}Convert to Lion{% endblock %}
{% block content %}
<h1 class="mt-4">Convert to Lion Catalog</h1>
<form method="post" enctype="multipart/form-data" class="mb-4">
  <div class="mb-3">
    <label for="template" class="form-label">Select Saved Template</label>
    <select class="form-control" id="template" name="template">
      <option value="">-- Choose Template --</option>
      {% for name in templates %}
      <option value="{{ name }}">{{ name }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="mb-3">
    <label for="file" class="form-label">Or Upload Supply File</label>
    <input type="file" class="form-control" id="file" name="file" />
    <div class="form-text">If neither option is provided, Supply 1 data will be used.</div>
  </div>
  <button type="submit" class="btn btn-primary">Convert</button>
</form>
{% if table %}
  <h2>Results</h2>
  {{ table | safe }}
  {% if grand_total is not none %}
    <p><strong>Total:</strong> {{ "$%.2f"|format(grand_total) }}</p>
  {% endif %}
  {% if download_filename %}
    <a href="{{ url_for('download_lion', filename=download_filename) }}" class="btn btn-success mt-3">Download Workbook</a>
  {% endif %}
  {% if download_pdf %}
    <a href="{{ url_for('download_lion_pdf', filename=download_pdf) }}" class="btn btn-info mt-3">Download PDF</a>
  {% endif %}
{% endif %}
{% endblock %}
